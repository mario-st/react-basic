{"version":3,"sources":["Store.jsx"],"names":[],"mappings":"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","file":"Store.js","sourcesContent":["\"use strict\";\r\n\r\nimport EventEmitter from \"events\";\r\n\r\nexport const EVENT_CHANGE = \"change\";\r\n\r\nclass Store extends EventEmitter {\r\n\r\n    /**\r\n     * initializes an instance of a store\r\n     * @param {*} dispatcher\r\n     * @param {Function} register\r\n     * @param {*} storage\r\n     */\r\n    constructor (dispatcher, register, storage) {\r\n        super();\r\n        this.stored = storage || {};\r\n        dispatcher.register(register);\r\n    }\r\n\r\n    /**\r\n     * execute change event if something was changed in the store\r\n     * @param {*} action\r\n     */\r\n    emitOnChange (action) {\r\n        if (this.changed) {\r\n            this.changed = false;\r\n            this.emit(EVENT_CHANGE, action);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * add event listener on change event\r\n     * @param {Function} fn\r\n     */\r\n    onChange (fn) {\r\n        this.on(EVENT_CHANGE, fn);\r\n    }\r\n\r\n    /**\r\n     * remove event listener from change event\r\n     * @param {Function} fn\r\n     */\r\n    offChange (fn) {\r\n        this.removeListener(EVENT_CHANGE, fn);\r\n    }\r\n\r\n    /**\r\n     * get an item from the store\r\n     * @param {String} key\r\n     * @returns {*}\r\n     */\r\n    getItem (key) {\r\n        return this.stored[ key ];\r\n    }\r\n\r\n    /**\r\n     * add an item to the store\r\n     * @param {String} key\r\n     * @param {*} value\r\n     */\r\n    setItem (key, value) {\r\n        if (this.stored[ key ] !== value) {\r\n            this.stored[ key ] = value;\r\n            this.changed       = true;\r\n        }\r\n    }\r\n\r\n    _createListIfNeeded (key) {\r\n        if (!this.stored[ key ]) {\r\n            this.stored[ key ] = [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * append an item to a list inside of the store\r\n     * @param {String} key\r\n     * @param {*} value\r\n     */\r\n    pushItem (key, value) {\r\n        this._createListIfNeeded(key);\r\n        this.stored[ key ].push(value);\r\n        this.changed = true;\r\n    }\r\n\r\n    /**\r\n     * set an item in a list of items by index\r\n     * @param {String} key\r\n     * @param {Number} index\r\n     * @param {*} value\r\n     */\r\n    setIndexedItem (key, index, value) {\r\n        this._createListIfNeeded(key);\r\n        if (value !== this.stored[ key ][ index ]) {\r\n            this.stored[ key ][ index ] = value;\r\n            this.changed                = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * removes an item from a list of items by index\r\n     * @param {String} key\r\n     * @param {*} value\r\n     */\r\n    delIndexedItem (key, value) {\r\n        this._createListIfNeeded(key);\r\n        let index = this.stored[ key ].indexOf(value);\r\n        if (index > -1) {\r\n            this.stored[ key ].splice(index, 1);\r\n            this.changed = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * insert multiple items in the store\r\n     * @param {Object} obj\r\n     */\r\n    setItems (obj) {\r\n        var keys = Object.keys(obj).filter((value, key) => this.stored[ key ] !== value, this);\r\n        keys.forEach((key) => this.stored[ key ] = obj[ key ], this);\r\n        this.changed = keys.length > 0;\r\n    }\r\n\r\n    /**\r\n     * remove multiple items in the store\r\n     * @param {String[]} keys\r\n     */\r\n    delItems (...keys) {\r\n        keys = keys.filter((key) => this.stored[ key ], this);\r\n        keys.forEach((key) => delete this.stored[ key ], this);\r\n        this.changed = keys.length > 0;\r\n    }\r\n\r\n    /**\r\n     * remove every item in the store\r\n     */\r\n    cleanUp () {\r\n        this.stored  = {};\r\n        this.changed = true;\r\n    }\r\n\r\n}\r\n\r\nexport default Store;"],"sourceRoot":"/source/"}