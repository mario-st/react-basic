{"version":3,"sources":["stores/LocalStore.jsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;IAIA,UAAU,WAAV,UAAU;cAAV,UAAU;;AAEnB,aAFS,UAAU,CAEN,UAAU,EAAE,QAAQ,EAAE;8BAF1B,UAAU;;sEAAV,UAAU,aAGT,UAAU,EAAE,QAAQ,EAAE,MAAM,CAAC,YAAY;KAClD;;iBAJQ,UAAU;;4CAME,GAAG,EAAE;AACtB,gBAAI,CAAC,IAAI,CAAC,MAAM,CAAE,GAAG,CAAE,EAAE;AACrB,oBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC;aAC7B;SACJ;;;sCAEc,GAAG,EAAE;AAChB,mBAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAE,GAAG,CAAE,IAAI,IAAI,CAAC,CAAC;SACjD;;;iCAES,GAAG,EAAE,KAAK,EAAE;AAClB,gBAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAClC,eAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAChB,gBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACzC,gBAAI,CAAC,OAAO,GAAS,IAAI,CAAC;SAC7B;;;uCAEe,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE;AAC/B,gBAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;AAC9B,gBAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAClC,gBAAI,KAAK,KAAK,GAAG,CAAE,KAAK,CAAE,EAAE;AACxB,mBAAG,CAAE,KAAK,CAAE,GAAS,KAAK,CAAC;AAC3B,oBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACzC,oBAAI,CAAC,OAAO,GAAS,IAAI,CAAC;aAC7B;SACJ;;;uCAEe,GAAG,EAAE,KAAK,EAAE;AACxB,gBAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;AAC9B,gBAAI,GAAG,GAAK,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AACpC,gBAAI,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC/B,gBAAI,KAAK,GAAG,CAAC,CAAC,EAAE;AACZ,mBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AACrB,oBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACzC,oBAAI,CAAC,OAAO,GAAS,IAAI,CAAC;aAC7B;SACJ;;;kCAEU;AACP,gBAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;AACpB,gBAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACvB;;;WA/CQ,UAAU;WAFf,KAAK","file":"stores/LocalStore.js","sourcesContent":["\"use strict\";\n\nimport {Store} from '../Store';\n\nexport class LocalStore extends Store {\n\n    constructor (dispatcher, register) {\n        super(dispatcher, register, window.localStorage);\n    }\n\n    _createListIfNeeded (key) {\n        if (!this.stored[ key ]) {\n            this.stored[ key ] = \"[]\";\n        }\n    }\n\n    _getJsonArray (key) {\n        return JSON.parse(this.stored[ key ] || \"[]\");\n    }\n\n    pushItem (key, value) {\n        let arr = this._getJsonArray(key);\n        arr.push(value);\n        this.stored[ key ] = JSON.stringify(arr);\n        this.changed       = true;\n    }\n\n    setIndexedItem (key, index, value) {\n        this._createListIfNeeded(key);\n        let arr = this._getJsonArray(key);\n        if (value !== arr[ index ]) {\n            arr[ index ]       = value;\n            this.stored[ key ] = JSON.stringify(arr);\n            this.changed       = true;\n        }\n    }\n\n    delIndexedItem (key, value) {\n        this._createListIfNeeded(key);\n        let arr   = this._getJsonArray(key);\n        let index = arr.indexOf(value);\n        if (index > -1) {\n            arr.splice(index, 1);\n            this.stored[ key ] = JSON.stringify(arr);\n            this.changed       = true;\n        }\n    }\n\n    cleanUp () {\n        this.stored.clear();\n        this.changed = true;\n    }\n\n}\n"],"sourceRoot":"/source/"}