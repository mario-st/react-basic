{"version":3,"sources":["stores/JsonStore.jsx"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;IAKP,YAAY;cAAZ,YAAY;;AAEd,aAFE,YAAY,CAED,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE;8BAF1C,YAAY;;sEAAZ,YAAY,aAGJ,UAAU,EAAE,QAAQ,EAAE,OAAO;KACtC;;iBAJC,YAAY;;4CAMO,GAAG,EAAE;AACtB,gBAAI,CAAC,IAAI,CAAC,MAAM,CAAE,GAAG,CAAE,EAAE;AACrB,oBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC;aAC7B;SACJ;;;sCAEc,GAAG,EAAE;AAChB,mBAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAE,GAAG,CAAE,IAAI,IAAI,CAAC,CAAC;SACjD;;;gCAEQ,GAAG,EAAE,KAAK,EAAE;AACjB,uCAjBF,YAAY,yCAiBI,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;SAC7C;;;iCAES,GAAG,EAAE;AACX,uCArBF,YAAY,0CAqBK,yBAAU,GAAG,EAAE,UAAC,KAAK;uBAAK,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;aAAA,CAAC,EAAE;SACpE;;;gCAEQ,GAAG,EAAE;AACV,mBAAO,IAAI,CAAC,KAAK,CAAC,2BAzBpB,YAAY,yCAyBsB,GAAG,KAAK,MAAM,CAAC,CAAC;SACnD;;;iCAES,GAAG,EAAE,KAAK,EAAE;AAClB,gBAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAClC,eAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAChB,gBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACzC,gBAAI,CAAC,OAAO,GAAS,IAAI,CAAC;SAC7B;;;uCAEe,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE;AAC/B,gBAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;AAC9B,gBAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AAClC,gBAAI,KAAK,KAAK,GAAG,CAAE,KAAK,CAAE,EAAE;AACxB,mBAAG,CAAE,KAAK,CAAE,GAAS,KAAK,CAAC;AAC3B,oBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACzC,oBAAI,CAAC,OAAO,GAAS,IAAI,CAAC;aAC7B;SACJ;;;uCAEe,GAAG,EAAE,KAAK,EAAE;AACxB,gBAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;AAC9B,gBAAI,GAAG,GAAK,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AACpC,gBAAI,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC/B,gBAAI,KAAK,GAAG,CAAC,CAAC,EAAE;AACZ,mBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;AACrB,oBAAI,CAAC,MAAM,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AACzC,oBAAI,CAAC,OAAO,GAAS,IAAI,CAAC;aAC7B;SACJ;;;WAtDC,YAAY;;;kBA0DH,YAAY","file":"stores/JsonStore.js","sourcesContent":["\"use strict\";\r\n\r\nimport Store from '../Store';\r\nimport mapValues from \"lodash/object/mapValues\";\r\n\r\nclass SessionStore extends Store {\r\n\r\n    constructor (dispatcher, register, storage) {\r\n        super(dispatcher, register, storage);\r\n    }\r\n\r\n    _createListIfNeeded (key) {\r\n        if (!this.stored[ key ]) {\r\n            this.stored[ key ] = \"[]\";\r\n        }\r\n    }\r\n\r\n    _getJsonArray (key) {\r\n        return JSON.parse(this.stored[ key ] || \"[]\");\r\n    }\r\n\r\n    setItem (key, value) {\r\n        super.setItem(key, JSON.stringify(value));\r\n    }\r\n\r\n    setItems (obj) {\r\n        super.setItems(mapValues(obj, (value) => JSON.stringify(value)));\r\n    }\r\n\r\n    getItem (key) {\r\n        return JSON.parse(super.getItem(key) || \"null\");\r\n    }\r\n\r\n    pushItem (key, value) {\r\n        let arr = this._getJsonArray(key);\r\n        arr.push(value);\r\n        this.stored[ key ] = JSON.stringify(arr);\r\n        this.changed       = true;\r\n    }\r\n\r\n    setIndexedItem (key, index, value) {\r\n        this._createListIfNeeded(key);\r\n        let arr = this._getJsonArray(key);\r\n        if (value !== arr[ index ]) {\r\n            arr[ index ]       = value;\r\n            this.stored[ key ] = JSON.stringify(arr);\r\n            this.changed       = true;\r\n        }\r\n    }\r\n\r\n    delIndexedItem (key, value) {\r\n        this._createListIfNeeded(key);\r\n        let arr   = this._getJsonArray(key);\r\n        let index = arr.indexOf(value);\r\n        if (index > -1) {\r\n            arr.splice(index, 1);\r\n            this.stored[ key ] = JSON.stringify(arr);\r\n            this.changed       = true;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default SessionStore;"],"sourceRoot":"/source/"}